(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-653ed8f8"],{2423:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"f",(function(){return u}));var r=a("66df"),n=function(t){return r["a"].request({url:"/article/getDetail",params:t})},o=function(t){return r["a"].request({url:"/article/getList",params:t})},c=function(t){return r["a"].request({url:"/article/save",method:"post",data:t})},i=function(t){return r["a"].request({url:"/article/update",method:"post",data:t})},s=function(){return r["a"].request({url:"/article/getOrderList",params:{type:"category"}})},l=function(t){return r["a"].request({url:"/article/del",method:"post",data:t})},u=function(t){return r["a"].request({url:"/article/switchShow",method:"post",data:t})}},"3ab4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidate",attrs:{"label-position":"right","label-width":60,model:t.artInfo}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{staticClass:"input-large",attrs:{placeholder:"输入标题"},model:{value:t.artInfo.title,callback:function(e){t.$set(t.artInfo,"title",e)},expression:"artInfo.title"}})],1),a("markdown-editor",{attrs:{value:t.contentVal},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),a("FormItem",{attrs:{label:"文章类型"}},[a("RadioGroup",{model:{value:t.artInfo.type,callback:function(e){t.$set(t.artInfo,"type",e)},expression:"artInfo.type"}},[a("Radio",{attrs:{label:"original"}},[t._v("原创")]),a("Radio",{attrs:{label:"reference"}},[t._v("转载")])],1)],1),a("FormItem",{attrs:{label:"文章分类"}},[a("Select",{staticClass:"input-small",attrs:{filterable:""},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.categoryList,(function(e){return a("Option",{key:e.value,attrs:{value:e.name?e.name:"---"}},[t._v(t._s(e.name?e.name:"---"))])})),1),a("span",{staticClass:"mlr1r"},[t._v("OR 新增分类")]),a("Input",{staticClass:"input-small",attrs:{placeholder:"新建分类"},model:{value:t.cacheCategory,callback:function(e){t.cacheCategory=e},expression:"cacheCategory"}}),a("Button",{staticClass:"row-btn",on:{click:t.handleAddCategory}},[t._v("添加")])],1),a("FormItem",{attrs:{label:"文章标签"}},[a("Input",{staticClass:"input-small",attrs:{placeholder:"输入Tag"},model:{value:t.cacheTag,callback:function(e){t.cacheTag=e},expression:"cacheTag"}}),a("Button",{staticClass:"row-btn",on:{click:t.handleAddTag}},[t._v("添加")])],1),a("FormItem",t._l(t.arrTag,(function(e){return a("Tag",{key:e,attrs:{name:e,closable:""},on:{"on-close":t.handleCloseTag}},[t._v(t._s(e))])})),1),a("FormItem",{attrs:{label:"摘要"}},[a("Input",{staticClass:"input-large",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter summary..."},model:{value:t.artInfo.summary,callback:function(e){t.$set(t.artInfo,"summary",e)},expression:"artInfo.summary"}})],1),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.toSubmit}},[t._v("发表")])],1),a("Modal",{attrs:{width:"300",draggable:"",scrollable:"",title:"确认发表"},on:{"on-ok":t.confirmSubmit},model:{value:t.modalSubmit,callback:function(e){t.modalSubmit=e},expression:"modalSubmit"}},[a("div",[t._v("确认发表？")])])],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("bd86")),c=a("5e53"),i=a("2423");a("a144");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"creative-space",data:function(){return{show:!0,title:"",artInfo:{title:"",type:"original",summary:""},content:"",contentVal:"",cacheTag:"",cacheCategory:"",arrTag:[],categoryList:[],category:null,modalSubmit:!1,artID:""}},beforeMount:function(){this.artID=this.$route.query.artID,this.artID&&this.getArtDetail()},mounted:function(){var t=this;Object(i["e"])().then((function(e){var a=e.data;console.log(a,"get-category-list"),t.categoryList=a.data}))},methods:{getArtDetail:function(){var t=this;Object(i["c"])({articleID:this.artID}).then((function(e){var a=e.data.data;console.log(a,"get-article-detail"),1e3===e.data.code&&(t.artInfo=a,t.artInfo.type=0===a.type?"original":"reference",localStorage.markdownContent=a.content,t.content=a.content,t.contentVal=a.content,t.category=a.category,t.tags=a.tags)}))},toSubmit:function(){this.artInfo.title?this.content?this.category?this.modalSubmit=!0:this.$Message.error("请选择文章分类"):this.$Message.error("请输入内容"):this.$Message.error("请输入标题")},confirmSubmit:function(){var t=this,e={title:this.artInfo.title,content:this.content,tags:this.arrTag,category:this.category,type:"original"===this.artInfo.type?0:1,summary:this.handleSummary(this.content)};this.artID?Object(i["g"])(l({},e,{articleID:this.artID})).then((function(e){var a=e.data;console.log(a,"update-article"),1e3===a.code&&(t.$Message.success("修改文章成功！"),localStorage.removeItem("markdownContent"),t.$router.push({name:t.$config.homeName}))})):Object(i["a"])(e).then((function(e){var a=e.data;console.log(a,"add-article"),1e3===a.code&&(t.$Message.success("发表成功！"),localStorage.removeItem("markdownContent"),t.$router.push({name:t.$config.homeName}))}))},handleAddCategory:function(){this.cacheCategory?this.category=this.cacheCategory:this.$Message.error("Category内容不能为空")},handleAddTag:function(){this.cacheTag?(this.arrTag.push(this.cacheTag),this.cacheTag=""):this.$Message.error("Tag内容不能为空")},handleSummary:function(t){return this.artInfo.summary?this.artInfo.summary:(e=t.length>200?t.slice(0,199):t,e=e.replace("```",""),e=e.replace("`",""),e=e.replace("> ",""),e=e.replace("**",""),e=e.replace(/\#* /g,""),e=e.replace(/[\r\n]/g,""),e=e.replace("---",""),e);var e},handleCloseTag:function(t,e){var a=this.arrTag.indexOf(e);this.arrTag.splice(a,1)},init2:function(){},init:function(){}},components:{MarkdownEditor:c["a"]}},d=u,m=(a("8d59"),a("2877")),f=Object(m["a"])(d,r,n,!1,null,"74ae0215",null);e["default"]=f.exports},"8d59":function(t,e,a){"use strict";var r=a("d80a"),n=a.n(r);n.a},a144:function(t,e,a){},d80a:function(t,e,a){}}]);